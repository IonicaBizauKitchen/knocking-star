<html>
<head>
    <meta charset="utf-8">

    <title>Knocking Star</title>
    <meta name="description" content="">

    <!-- Mobile -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Fonts -->
    <link href="//fonts.googleapis.com/css?family=RobotoDraft:300,400,500|Source+Code+Pro:400,500,700" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>

    <!-- Web Components -->
    <script src="bower_components/webcomponentsjs/webcomponents-lite.js"></script>

    <link rel="import" href="elements/elements.html">

    <!-- Styles -->
    <link rel="stylesheet" href="main.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>

    <script>

    </script>

    <style is="custom-style">
        [center] {
            @apply(--layout-vertical);
            @apply(--layout-center-center);
        }

        :root {
            --paper-tab-ink: rgba(207, 216, 220, 0.8);
            --paper-tabs-selection-bar-color: #FFFFFF;
            /*--paper-tabs-selection-bar-height: 3px;*/
        }

        .item {
            @apply(--layout-horizontal);
            @apply(--layout-center-center);
        }

        .pad {
            @apply(--layout-flex);
            @apply(--layout-vertical);
        }

    </style>
</head>
<body class="fullbleed layout vertical" unresolved>

<div class="header" center>
    <img class="header-logo" src="images/knockingstar.png" alt="Logo">

    <h1 class="header-title">Knocking Star</h1>

    <h2 class="header-subtitle">A little about the reality of universe</h2>

    <form class="search">
        <input name="q" class="search-field" type="text" id="search-field" autocomplete="off">
        <label class="search-label" for="search-field">
            <span class="search-label-content">Search...</span>
        </label>
    </form>
</div>

<template is="dom-bind" id="app">

    <div class="tabs">
        <paper-tabs attr-for-selected="data-route" selected="{{route}}">
            <paper-tab data-route="projects">
                <a href="/projects" class="horizontal center-center layout">PROJECTS</a>
            </paper-tab>
            <paper-tab data-route="posts" onclick="showPosts()">
                <a href="/posts" class="horizontal center-center layout">POSTS</a>
            </paper-tab>
            <paper-tab data-route="about">
                <a href="/about" class="horizontal center-center layout">ABOUT</a>
            </paper-tab>
        </paper-tabs>
    </div>

    <div class="container">
        <iron-ajax id="binder"
                   auto
                   url="posts.json"
                   handle-as="json"
                   on-response="dataReceived"
                   last-response="{{data}}"></iron-ajax>

        <neon-animated-pages id="pages"
                             attr-for-selected="data-route"
                             selected="{{route}}">

            <section is="ripple-cards-list" id="list" data-route="posts">
                <div id="rippler"></div>

                <div>
                    <up-slider>
                        <template is="dom-repeat" items="[[data]]">
                            <div class="item">
                                <img class="avatar" src="[[item.image]]">

                                <div class="pad">
                                    <div class="title">[[item.title]]</div>
                                    <div class="subject">[[item.subject]]</div>
                                    <div class="description">[[item.description]]</div>
                                    <div class="date">[[item.date]]</div>

                                    <bindable-link on-click="_onPolymerClick" bind-attr="[[item.id]]">

                                        <paper-button class="read-button" ripple>
                                            <iron-icon icon="icons:arrow-forward"></iron-icon>
                                            Read
                                        </paper-button>
                                    </bindable-link>
                                </div>
                            </div>
                        </template>
                    </up-slider>
                </div>
            </section>
            <section is="ripple-card" data-route="post-detail">
                <div class="fit layout vertical center-center">
                    <p id="paragraph"></p>
                    <bindable-link on-click="_onBackClick" bind-attr="">
                        <paper-button raised>Read</paper-button>
                    </bindable-link>
                </div>
            </section>
            <section data-route="projects">
                <h1>Projects</h1>
            </section>
            <section data-route="about">
                <h1>About</h1>
            </section>
        </neon-animated-pages>
    </div>
</template>

<script>

    document.addEventListener('WebComponentsReady', function () {

        var rippler = document.getElementById('rippler');
        var scope = document.querySelector('#app');

        scope.dataReceived = function () {
            console.log('Response data was received.');
        };

        scope._onPolymerClick = function (event) {
            this.$.list.sharedElements = {
                'ripple': rippler,
                'reverse-ripple': rippler
            };
            $("paper-tab").fadeOut();
            this.$.pages.selected = 'post-detail';
        };

        scope._onBackClick = function (event) {
            $("paper-tab").fadeIn();
            this.$.list.sharedElements = {
                'ripple': rippler,
                'reverse-ripple': rippler
            };
            this.$.pages.selected = 'posts';
        }
    });

    function showPosts() {
        var post = document.querySelector('up-slider');
        post.show();
    }
    function hidePosts() {
        var post = document.querySelector('up-slider');
        post.hide();
    }


</script>
<script src="script/main.js"></script>
</body>
</html>